# from-space-to-telegram

## Описание проекта

Программа позволяет скачивать фотографии космоса от NASA (NASA APOD, NASA EPIC) и с запусков SpaceX при помощи API, а затем в автоматическом режиме размещать их в телеграм-канале.

## Установка и запуск

Для запуска скрипта понадобится:

- [poetry](https://python-poetry.org/docs/master#installation)
- [python](https://www.python.org) версии не ниже 3.10
- получить API-токен NASA [здесь](https://api.nasa.gov/)
- [зарегистрировать](https://way23.ru/%D1%80%D0%B5%D0%B3%D0%B8%D1%81%D1%82%D1%80%D0%B0%D1%86%D0%B8%D1%8F-%D0%B1%D0%BE%D1%82%D0%B0-%D0%B2-telegram.html) бота в Telegram и получить API-токен
- [создать](https://smmplanner.com/blog/otlozhennyj-posting-v-telegram/) Telegram-канал и [узнать](https://perfluence.net/blog/article/kak-uznat-id-telegram) его id

После этого:

1. Склонируйте репозиторий к себе на компьютер
   ```bash
   $ git clone https://github.com/lbazarnov/from-space-to-telegram.git
   ```
2. Создайте файл для переменных окружения `.env`, поместив туда ваши токены NASA, Telegram и id Telegram-канала
   ```
   $ сd from-space-to-telegram
   $ touch .env
   $ echo 'NASA_API_TOKEN=вставьте_ваш_токен_сюда' > .env
   $ echo 'TELEGRAM_API_TOKEN=вставьте_ваш_токен_сюда' >> .env
   # echo 'CHANNEL_ID=вставьте_id_канала_сюда' >> .env
   ```
3. Последовательно запустите несколько команд
    ```bash
    $ poetry shell # Для запуска виртуального окружения проекта
    $ make install # Для установки зависимостей проекта
    $ make build # Для сборки проекта
    $ make package-install # Для установки скрипта на компьютер
    ```
4. Запустите скрипт скачивания фотографий из всех источников. По умолчанию он скачивает фото с последнего запуска SpaceX и 30 фотографий NASA APOD:
    ```bash
    $ fetch-images
    ```
    Для скачивания фото с конкретного запуска SpaceX с аргументом `-id`, в котором необходимо указать ID запуска, а также с аргументом `-d`, в котором будет указан путь сохранения
    ```bash
    $ fetch-spacex-images 
    ```
    Если вам необходимы только фото NASA APOD или другое их количество, то скачать их можно при помощи этой команды, передав с аргументом `-d` путь сохранения и нужное количество фотографий с аргументом `-c`
    ```bash
    $ fetch-nasa-apod -d 'images' -c 42
    ```
    А если вам необходимы только фото NASA EPIC, то они скачаются после вызова этой команды c аргументом `-d`, в котором необходимо передать путь сохранения файлов
    ```bash
    $ fetch-nasa-epi -d 'images'
    ```
5. Запустите скрипт автоматической загрузки фотографий в Telegram-канал командой `from-space-to-telegram`
    ```bash
    $ from-space-to-telegram
    ```
    По умолчанию интервал публикации фотографий составляет 4 часа. Для того, чтобы изменить интервал, передайте новое значение в секундах как аргумент к команде. Пример вызова команды с интервалом публикации в две минуты:
    ```bash
    $ from-space-to-telegram 120
    ```

    Если все скачанные фотографии будут опубликованы, то программа перемешает их и начнёт публикацию заново. Фото размером более 20 мб не будут опубликованы.
    